<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Blood Library</title>
    <link rel="icon" href="favicon.ico" />
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
	
	<script src="https://cdn.jsdelivr.net/gh/xcash/bootstrap-autocomplete@v2.3.7/dist/latest/bootstrap-autocomplete.min.js"></script>
	
	<script src="scripts.js"></script>
    <link rel="stylesheet" href="style.css" />


  </head>

  <body class="container">
  <h1>Blood Library</h1>
		<div class="main-content">
			<div class="column-content ccs">
			
					
						<select class="form-control basicAutoSelect card-input" autocomplete="off" name=cardselector" placeholder="Type card name..."></select>
						
						<div class="form-inline card-input">
							<label for="lackey" class="col-form-label-sm">Import Lackey deck</label>
							<input type="file" accept=".txt" onchange="loadCardsFromFile(this)" class="form-control-file" id=lackey"></input>
						</div>
						
						<button id="generate" type="button" onclick="generatePDF()" class="btn btn-primary btn-lg btn-block">Generate PDF</button>
						<button type="button" onclick="clearCardList()" class="btn btn-primary btn-lg btn-block">Clear list</button>
			</div>
			<div class= "column-content ccl">
						<table class="table card-list" id="card-list">
							<thead>
								<tr>
								  <th scope="col">Image</th>
								  <th scope="col">Name</th>
								  <th scope="col">Amount</th>
								  <th scope="col">Remove</th>
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					</td>
			</div>
		</div>
		
		<script>
			$('.basicAutoSelect').autoComplete(
			{
				minLength: 2,
				resolver: 'custom',
				events: {
					search: function (query, callback) {
						$.get("https://api.bloodlibrary.info/api/search/?name="+query)
						.done(function (results) {
							callback(
								results.slice(0,10).map( function (card, i, arr) { return {'value': card.id, 'text': card.name}})
							);
						});
					}
				}
			});
			$('.basicAutoSelect').autoComplete('show');
			$('.basicAutoSelect').on('autocomplete.select', function(event, item) {
				addCard(item.text, item.value);
				$('.basicAutoSelect').autoComplete('clear');
			});
			
		</script>
		
		        <footer>
				<div class="column-content dp-image ccs">
					<img src="http://www.vekn.net/images/stories/ww/dark-pact.png" alt="" width="150" height="117">
				</div>
                
				<p class="column-content ccl dp-text">
                Portions of the materials are the copyrights and trademarks of White Wolf Publishing AB, and are used with permission. All rights reserved. For more information please visit 
				<a href="http://www.white-wolf.com/">white-wolf.com</a>.
				</p>
        </footer>
  </body>
</html>